INFO:alpaca.data.live.websocket:started data stream
INFO:alpaca.data.live.websocket:starting data websocket connection
INFO:alpaca.data.live.websocket:connecting to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:connected to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:subscribed to bars: ['BTC/USD']
ERROR:asyncio:Task was destroyed but it is pending!
task: <Task cancelling name='Task-4' coro=<WebSocketCommonProtocol.close_connection() running at /opt/anaconda3/lib/python3.12/site-packages/websockets/legacy/protocol.py:1311> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:922, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:767]>
INFO:alpaca.data.live.websocket:started data stream
INFO:alpaca.data.live.websocket:starting data websocket connection
INFO:alpaca.data.live.websocket:connecting to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:connected to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:subscribed to bars: ['BTC/USD']
ERROR:asyncio:Task was destroyed but it is pending!
task: <Task cancelling name='Task-4' coro=<WebSocketCommonProtocol.close_connection() running at /opt/anaconda3/lib/python3.12/site-packages/websockets/legacy/protocol.py:1311> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:922, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:767]>
INFO:alpaca.data.live.websocket:started data stream
INFO:alpaca.data.live.websocket:starting data websocket connection
INFO:alpaca.data.live.websocket:connecting to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:connected to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:subscribed to bars: ['BTC/USD']
ERROR:asyncio:Task was destroyed but it is pending!
task: <Task cancelling name='Task-4' coro=<WebSocketCommonProtocol.close_connection() running at /opt/anaconda3/lib/python3.12/site-packages/websockets/legacy/protocol.py:1311> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:922, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:767]>
INFO:alpaca.data.live.websocket:started data stream
INFO:alpaca.data.live.websocket:starting data websocket connection
INFO:alpaca.data.live.websocket:connecting to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:connected to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:subscribed to bars: ['BTC/USD']
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': 'f97f921e-7561-4b96-ba3f-b579b812709c', 'client_order_id': '32489fad-f186-44e4-92d7-0c616845fe01', 'created_at': '2024-08-15T23:03:00.137987275Z', 'updated_at': '2024-08-15T23:03:00.139298775Z', 'submitted_at': '2024-08-15T23:03:00.137987275Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': 'f79cebc1-84ba-402b-9f7d-d0a453f15e78', 'client_order_id': '2fea7df4-5ab2-4bcb-8835-a1645d8e37ad', 'created_at': '2024-08-15T23:04:00.156239035Z', 'updated_at': '2024-08-15T23:04:00.157412925Z', 'submitted_at': '2024-08-15T23:04:00.156239035Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of BTCUSD
 {'id': '377ee226-76f1-4f11-ba0a-8ba515f6c35d', 'client_order_id': 'a310606a-4911-40f3-a2c7-e3433c84ea63', 'created_at': '2024-08-15T23:05:00.041107679Z', 'updated_at': '2024-08-15T23:05:00.042475239Z', 'submitted_at': '2024-08-15T23:05:00.041107679Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'sell', 'position_intent': 'sell_to_close', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of BTCUSD
 {'id': '2c4eb8fb-bb86-416f-b104-bac653651924', 'client_order_id': '49b06bcd-17f6-494c-801d-e157da378934', 'created_at': '2024-08-15T23:06:00.074036971Z', 'updated_at': '2024-08-15T23:06:00.075386371Z', 'submitted_at': '2024-08-15T23:06:00.074036971Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'sell', 'position_intent': 'sell_to_close', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of BTCUSD
 {'id': '46c0b198-adeb-4de6-a445-d8771ac4d804', 'client_order_id': '4374b732-a1bf-4cc0-9889-b3dfc34fd8b2', 'created_at': '2024-08-15T23:07:00.062575784Z', 'updated_at': '2024-08-15T23:07:00.063800654Z', 'submitted_at': '2024-08-15T23:07:00.062575784Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'sell', 'position_intent': 'sell_to_close', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of BTCUSD
 {'id': 'e60cad8c-8f41-49f7-80e6-77271cde1b75', 'client_order_id': 'ea79a9aa-a185-4e32-99da-21ff41ca37bc', 'created_at': '2024-08-15T23:09:00.136137376Z', 'updated_at': '2024-08-15T23:09:00.137441475Z', 'submitted_at': '2024-08-15T23:09:00.136137376Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'sell', 'position_intent': 'sell_to_close', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of BTCUSD
 {'id': 'cab0c8c9-d6d6-4e24-9df9-925ec177920c', 'client_order_id': 'd623ace9-434a-407f-a559-92c5a6cb8bef', 'created_at': '2024-08-15T23:10:00.186326512Z', 'updated_at': '2024-08-15T23:10:00.189072562Z', 'submitted_at': '2024-08-15T23:10:00.186326512Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'sell', 'position_intent': 'sell_to_close', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of BTCUSD
 {'id': '96a6c905-1028-4edb-987f-7551ea24d537', 'client_order_id': '4d9a4b4a-1ac2-4ce6-a833-1afb4ed2d0fa', 'created_at': '2024-08-15T23:14:00.185989819Z', 'updated_at': '2024-08-15T23:14:00.187261488Z', 'submitted_at': '2024-08-15T23:14:00.185989819Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'sell', 'position_intent': 'sell_to_close', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': '23bf842e-8f01-4cff-b965-8749949c7a6f', 'client_order_id': '0d45f1c3-bf53-4859-b3fc-806b97871573', 'created_at': '2024-08-15T23:18:00.337249267Z', 'updated_at': '2024-08-15T23:18:00.338638107Z', 'submitted_at': '2024-08-15T23:18:00.337249267Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
ERROR:asyncio:Task was destroyed but it is pending!
task: <Task cancelling name='Task-4' coro=<WebSocketCommonProtocol.close_connection() running at /opt/anaconda3/lib/python3.12/site-packages/websockets/legacy/protocol.py:1311> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:922, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:767]>
INFO:alpaca.data.live.websocket:started data stream
INFO:alpaca.data.live.websocket:starting data websocket connection
INFO:alpaca.data.live.websocket:connecting to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:connected to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:subscribed to bars: ['BTC/USD']
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': '74fb4193-f783-4285-ad81-9085894c06b7', 'client_order_id': '37f31306-7912-4b05-8e68-9fce03157e88', 'created_at': '2024-08-15T23:24:00.19602121Z', 'updated_at': '2024-08-15T23:24:00.19730401Z', 'submitted_at': '2024-08-15T23:24:00.19602121Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
ERROR:asyncio:Task was destroyed but it is pending!
task: <Task cancelling name='Task-4' coro=<WebSocketCommonProtocol.close_connection() running at /opt/anaconda3/lib/python3.12/site-packages/websockets/legacy/protocol.py:1311> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:922, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:767]>
INFO:alpaca.data.live.websocket:started data stream
INFO:alpaca.data.live.websocket:starting data websocket connection
INFO:alpaca.data.live.websocket:connecting to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:connected to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:subscribed to bars: ['BTC/USD']
INFO:alpaca.data.live.websocket:started data stream
INFO:alpaca.data.live.websocket:starting data websocket connection
INFO:alpaca.data.live.websocket:connecting to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:connected to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:subscribed to bars: ['BTC/USD']
INFO:alpaca.data.live.websocket:started data stream
INFO:alpaca.data.live.websocket:starting data websocket connection
INFO:alpaca.data.live.websocket:connecting to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:connected to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:subscribed to bars: ['BTC/USD']
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': 'b273ab9e-295a-41e0-9031-ee691519bae1', 'client_order_id': '7d0ff8a7-39f1-468a-9140-4b3a7b59b690', 'created_at': '2024-08-15T23:37:00.070487564Z', 'updated_at': '2024-08-15T23:37:00.071443574Z', 'submitted_at': '2024-08-15T23:37:00.070487564Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': 'fb9a3bd8-a1ba-46eb-9b41-69a3e7c99c4d', 'client_order_id': '099e6bdf-779a-4cbe-85b6-05842b5f1c4a', 'created_at': '2024-08-15T23:38:00.068804918Z', 'updated_at': '2024-08-15T23:38:00.070030608Z', 'submitted_at': '2024-08-15T23:38:00.068804918Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': '1b7ec685-d398-4479-91be-9e4619e9cf88', 'client_order_id': 'f8816c81-3b43-4381-8652-047f9c9a0722', 'created_at': '2024-08-15T23:39:00.178065489Z', 'updated_at': '2024-08-15T23:39:00.179349199Z', 'submitted_at': '2024-08-15T23:39:00.178065489Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': 'ad86ca3e-9ffb-4eff-896f-c346c28a0a35', 'client_order_id': 'cf2b1c60-d25a-46f0-9ae6-bfe328d4d967', 'created_at': '2024-08-15T23:44:00.187137159Z', 'updated_at': '2024-08-15T23:44:00.188069869Z', 'submitted_at': '2024-08-15T23:44:00.187137159Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:Close position BTCUSD
 [{'symbol': 'BTCUSD', 'status': 200, 'body': {'id': 'f3e4bac1-23c5-4df1-96ad-70e2cde1bb60', 'client_order_id': '6fea399c-8c2b-4646-bd8d-13404d994532', 'created_at': '2024-08-15T23:45:00.119218446Z', 'updated_at': '2024-08-15T23:45:00.121801066Z', 'submitted_at': '2024-08-15T23:45:00.119218446Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.0399', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'sell', 'position_intent': 'sell_to_close', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}}, {'symbol': 'SPY', 'status': 403, 'body': {'available': '0', 'code': 40310000, 'existing_qty': '30', 'held_for_orders': '30', 'message': 'insufficient qty available for order (requested: 30, available: 0)', 'symbol': 'SPY'}}]
ERROR:asyncio:Task was destroyed but it is pending!
task: <Task cancelling name='Task-4' coro=<WebSocketCommonProtocol.close_connection() running at /opt/anaconda3/lib/python3.12/site-packages/websockets/legacy/protocol.py:1311> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:922, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:767]>
INFO:alpaca.data.live.websocket:started data stream
INFO:alpaca.data.live.websocket:starting data websocket connection
INFO:alpaca.data.live.websocket:connecting to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:connected to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:subscribed to bars: ['BTC/USD']
ERROR:asyncio:Task was destroyed but it is pending!
task: <Task cancelling name='Task-4' coro=<WebSocketCommonProtocol.close_connection() running at /opt/anaconda3/lib/python3.12/site-packages/websockets/legacy/protocol.py:1311> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:922, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:767]>
INFO:alpaca.data.live.websocket:started data stream
INFO:alpaca.data.live.websocket:starting data websocket connection
INFO:alpaca.data.live.websocket:connecting to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:connected to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:subscribed to bars: ['BTC/USD']
INFO:trader:Close position BTCUSD
 [{'symbol': 'SPY', 'status': 403, 'body': {'available': '0', 'code': 40310000, 'existing_qty': '30', 'held_for_orders': '30', 'message': 'insufficient qty available for order (requested: 30, available: 0)', 'symbol': 'SPY'}}]
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'de066e5d-28a2-430c-97f2-3bd59268cbaf', 'client_order_id': '373f5ef9-0666-4948-98a8-a6822ddeeb94', 'created_at': '2024-08-15T23:53:00.117578155Z', 'updated_at': '2024-08-15T23:53:00.118336995Z', 'submitted_at': '2024-08-15T23:53:00.117578155Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'd29102a8-7cf7-46d6-8736-45f828fe7e37', 'client_order_id': '99e938c0-0299-47da-ad53-4a005756f4b9', 'created_at': '2024-08-15T23:55:00.158025483Z', 'updated_at': '2024-08-15T23:55:00.160089833Z', 'submitted_at': '2024-08-15T23:55:00.158025483Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'cf28aca6-ce2d-41c1-9080-4210e751487e', 'client_order_id': '95b74715-e42c-4123-8b93-92e00ce33b6e', 'created_at': '2024-08-15T23:56:00.092383418Z', 'updated_at': '2024-08-15T23:56:00.093616128Z', 'submitted_at': '2024-08-15T23:56:00.092383418Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'b5378b5c-e622-4c2d-9328-74ac68e9674e', 'client_order_id': 'cca06443-464d-4bb3-b363-eb7333771b5b', 'created_at': '2024-08-15T23:58:00.084815986Z', 'updated_at': '2024-08-15T23:58:00.090467416Z', 'submitted_at': '2024-08-15T23:58:00.084815986Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '9e4c98b9-31e5-4393-b9f0-e1776d769c03', 'client_order_id': '405992d7-03e3-47d5-9408-69b6355e5d8a', 'created_at': '2024-08-15T23:59:00.205034065Z', 'updated_at': '2024-08-15T23:59:00.206350815Z', 'submitted_at': '2024-08-15T23:59:00.205034065Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '39acfbb6-adad-42b9-813f-203c867f0cc6', 'client_order_id': '98aae54c-493a-4df6-8bd2-a9936beeff68', 'created_at': '2024-08-16T00:01:00.184013225Z', 'updated_at': '2024-08-16T00:01:00.185070075Z', 'submitted_at': '2024-08-16T00:01:00.184013225Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '5e15b040-5488-490a-a307-c7393e995c22', 'client_order_id': '5eb5a53a-f484-4b4e-b7e8-9eee02103d77', 'created_at': '2024-08-16T00:04:00.209716041Z', 'updated_at': '2024-08-16T00:04:00.211255621Z', 'submitted_at': '2024-08-16T00:04:00.209716041Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '83c812b1-0524-4beb-aa92-b8a34a8984d2', 'client_order_id': '7fff8282-1107-4a53-8a58-a91c9f312086', 'created_at': '2024-08-16T00:05:00.055227385Z', 'updated_at': '2024-08-16T00:05:00.056539415Z', 'submitted_at': '2024-08-16T00:05:00.055227385Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'a0ef3b30-75c7-422f-bbbe-47177700a50d', 'client_order_id': '3e38928d-8195-40d7-882c-b1e965fb3398', 'created_at': '2024-08-16T00:09:00.155537407Z', 'updated_at': '2024-08-16T00:09:00.156770097Z', 'submitted_at': '2024-08-16T00:09:00.155537407Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '3b2b25b7-040e-4a77-ad0b-5f59ccd4798f', 'client_order_id': '629deadf-da6d-4eaa-b85f-0fff9d0dab66', 'created_at': '2024-08-16T00:10:00.210306559Z', 'updated_at': '2024-08-16T00:10:00.211334379Z', 'submitted_at': '2024-08-16T00:10:00.210306559Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'd81dbd99-ea40-4c8a-a128-1caafd9d1d24', 'client_order_id': '57b5ab55-9a4c-4f54-8a6d-d6d359835564', 'created_at': '2024-08-16T00:12:00.257595082Z', 'updated_at': '2024-08-16T00:12:00.258937942Z', 'submitted_at': '2024-08-16T00:12:00.257595082Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '1fcb0b6b-dc3b-4d8e-ae10-bd3754e3d021', 'client_order_id': '6fe7568d-e7ce-4593-b2b2-4fc983b6e00f', 'created_at': '2024-08-16T00:14:00.15723238Z', 'updated_at': '2024-08-16T00:14:00.15859295Z', 'submitted_at': '2024-08-16T00:14:00.15723238Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'b49d74e5-0fd0-4d89-85ba-76caf043bd02', 'client_order_id': '262f5c2d-3630-4e87-8515-5c8dde1d9c97', 'created_at': '2024-08-16T00:15:00.140569114Z', 'updated_at': '2024-08-16T00:15:00.141908364Z', 'submitted_at': '2024-08-16T00:15:00.140569114Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'e5c001c1-72cc-4d2c-99ba-da81b5b128b0', 'client_order_id': 'eed64ac0-08f2-4937-be5f-e59af0894476', 'created_at': '2024-08-16T00:16:00.06555016Z', 'updated_at': '2024-08-16T00:16:00.06688797Z', 'submitted_at': '2024-08-16T00:16:00.06555016Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '8eecd450-afe8-4187-9103-c93949e2e61d', 'client_order_id': '6ce195b8-285a-4754-afec-3c284d8a605e', 'created_at': '2024-08-16T00:17:00.035116712Z', 'updated_at': '2024-08-16T00:17:00.038932731Z', 'submitted_at': '2024-08-16T00:17:00.035116712Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '4f00e0d8-c943-4d30-b139-5404d791cf7c', 'client_order_id': '0ff1bbeb-cb1e-4aab-a177-c50aedf877c6', 'created_at': '2024-08-16T00:19:00.253954713Z', 'updated_at': '2024-08-16T00:19:00.255258343Z', 'submitted_at': '2024-08-16T00:19:00.253954713Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
ERROR:asyncio:Task was destroyed but it is pending!
task: <Task cancelling name='Task-4' coro=<WebSocketCommonProtocol.close_connection() running at /opt/anaconda3/lib/python3.12/site-packages/websockets/legacy/protocol.py:1311> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:922, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:767]>
INFO:alpaca.data.live.websocket:started data stream
INFO:alpaca.data.live.websocket:starting data websocket connection
INFO:alpaca.data.live.websocket:connecting to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:connected to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:subscribed to bars: ['BTC/USD']
ERROR:asyncio:Task was destroyed but it is pending!
task: <Task cancelling name='Task-4' coro=<WebSocketCommonProtocol.close_connection() running at /opt/anaconda3/lib/python3.12/site-packages/websockets/legacy/protocol.py:1311> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:922, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:767]>
INFO:alpaca.data.live.websocket:started data stream
INFO:alpaca.data.live.websocket:starting data websocket connection
INFO:alpaca.data.live.websocket:connecting to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:connected to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:subscribed to bars: ['BTC/USD']
ERROR:alpaca.data.live.websocket:error during websocket communication: 'Bar' object has no attribute 'data'
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 345, in _run_forever
    await self._consume()
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 163, in _consume
    await self._dispatch(msg)
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 261, in _dispatch
    await handler(self._cast(msg))
  File "/Users/kaifwang/trading/alpaca/algo.py", line 95, in bar_handler
    if (symbol not in bar.data):
                      ^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/pydantic/main.py", line 828, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Bar' object has no attribute 'data'
ERROR:asyncio:Task was destroyed but it is pending!
task: <Task cancelling name='Task-4' coro=<WebSocketCommonProtocol.close_connection() running at /opt/anaconda3/lib/python3.12/site-packages/websockets/legacy/protocol.py:1311> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:922, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:767]>
INFO:alpaca.data.live.websocket:started data stream
INFO:alpaca.data.live.websocket:starting data websocket connection
INFO:alpaca.data.live.websocket:connecting to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:connected to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:subscribed to bars: ['BTC/USD']
ERROR:alpaca.data.live.websocket:error during websocket communication: 'Bar' object has no attribute 'data'
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 345, in _run_forever
    await self._consume()
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 163, in _consume
    await self._dispatch(msg)
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 261, in _dispatch
    await handler(self._cast(msg))
  File "/Users/kaifwang/trading/alpaca/algo.py", line 95, in bar_handler
    if symbol not in bar.data:
                     ^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/pydantic/main.py", line 828, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Bar' object has no attribute 'data'
ERROR:alpaca.data.live.websocket:error during websocket communication: 'Bar' object has no attribute 'data'
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 345, in _run_forever
    await self._consume()
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 163, in _consume
    await self._dispatch(msg)
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 261, in _dispatch
    await handler(self._cast(msg))
  File "/Users/kaifwang/trading/alpaca/algo.py", line 95, in bar_handler
    if symbol not in bar.data:
                     ^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/pydantic/main.py", line 828, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Bar' object has no attribute 'data'
ERROR:alpaca.data.live.websocket:error during websocket communication: 'Bar' object has no attribute 'data'
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 345, in _run_forever
    await self._consume()
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 163, in _consume
    await self._dispatch(msg)
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 261, in _dispatch
    await handler(self._cast(msg))
  File "/Users/kaifwang/trading/alpaca/algo.py", line 95, in bar_handler
    if symbol not in bar.data:
                     ^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/pydantic/main.py", line 828, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Bar' object has no attribute 'data'
ERROR:alpaca.data.live.websocket:error during websocket communication: 'Bar' object has no attribute 'data'
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 345, in _run_forever
    await self._consume()
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 163, in _consume
    await self._dispatch(msg)
  File "/opt/anaconda3/lib/python3.12/site-packages/alpaca/data/live/websocket.py", line 261, in _dispatch
    await handler(self._cast(msg))
  File "/Users/kaifwang/trading/alpaca/algo.py", line 95, in bar_handler
    if symbol not in bar.data:
                     ^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/pydantic/main.py", line 828, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Bar' object has no attribute 'data'
ERROR:asyncio:Task was destroyed but it is pending!
task: <Task cancelling name='Task-4' coro=<WebSocketCommonProtocol.close_connection() running at /opt/anaconda3/lib/python3.12/site-packages/websockets/legacy/protocol.py:1311> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:922, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/anaconda3/lib/python3.12/asyncio/tasks.py:767]>
INFO:alpaca.data.live.websocket:started data stream
INFO:alpaca.data.live.websocket:starting data websocket connection
INFO:alpaca.data.live.websocket:connecting to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:connected to wss://stream.data.alpaca.markets/v1beta3/crypto/us
INFO:alpaca.data.live.websocket:subscribed to bars: ['BTC/USD']
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': '89b71e25-0184-4c9f-9239-163916cfee22', 'client_order_id': '63a6c2fd-977a-4804-bd2e-9c0982beb92d', 'created_at': '2024-08-16T00:28:00.112457264Z', 'updated_at': '2024-08-16T00:28:00.113319884Z', 'submitted_at': '2024-08-16T00:28:00.112457264Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:Close position BTCUSD
 [{'symbol': 'BTCUSD', 'status': 200, 'body': {'id': '8e9dda9d-097f-41d5-86e7-2beea5642aff', 'client_order_id': '6c764532-c756-4bf9-8f7f-fc2d37d23874', 'created_at': '2024-08-16T00:29:00.116295561Z', 'updated_at': '2024-08-16T00:29:00.117718011Z', 'submitted_at': '2024-08-16T00:29:00.116295561Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.009975', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'sell', 'position_intent': 'sell_to_close', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}}, {'symbol': 'SPY', 'status': 403, 'body': {'available': '0', 'code': 40310000, 'existing_qty': '30', 'held_for_orders': '30', 'message': 'insufficient qty available for order (requested: 30, available: 0)', 'symbol': 'SPY'}}]
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '27c6fdcd-d91c-4bd3-a24e-866c2b0df9b8', 'client_order_id': 'd4fb7798-eed5-47e0-8856-b2e0a4cc527b', 'created_at': '2024-08-16T00:29:00.148901789Z', 'updated_at': '2024-08-16T00:29:00.149695689Z', 'submitted_at': '2024-08-16T00:29:00.148901789Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '122b9eba-99d2-4ba4-8a1a-9a8bc93d0906', 'client_order_id': '87009909-9395-49db-a945-250ec690e6f9', 'created_at': '2024-08-16T00:30:00.122053667Z', 'updated_at': '2024-08-16T00:30:00.123329667Z', 'submitted_at': '2024-08-16T00:30:00.122053667Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'd60a7491-c2dc-42cf-8e13-fa275ab54052', 'client_order_id': '0d93ef0b-76ac-4ea9-970a-a5f87e165b80', 'created_at': '2024-08-16T00:33:00.087700562Z', 'updated_at': '2024-08-16T00:33:00.089036832Z', 'submitted_at': '2024-08-16T00:33:00.087700562Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '37ff467f-4be9-4b4c-ace1-aae3ce485755', 'client_order_id': 'adc21474-1f08-4981-a1ed-418b32e5190a', 'created_at': '2024-08-16T00:34:00.178930844Z', 'updated_at': '2024-08-16T00:34:00.180467933Z', 'submitted_at': '2024-08-16T00:34:00.178930844Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'a13211f0-8f33-461c-ab63-49e00b6693fc', 'client_order_id': 'c89b42d4-76fd-4a0e-b509-07a834a0e563', 'created_at': '2024-08-16T00:35:00.037841075Z', 'updated_at': '2024-08-16T00:35:00.039229085Z', 'submitted_at': '2024-08-16T00:35:00.037841075Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'ed310cef-aa32-4a50-8bba-b1b4545b0de3', 'client_order_id': 'e609e525-041c-45e2-a72e-2f591a1cb3f1', 'created_at': '2024-08-16T00:41:00.18316186Z', 'updated_at': '2024-08-16T00:41:00.18438932Z', 'submitted_at': '2024-08-16T00:41:00.18316186Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '53df66b3-1ff1-4450-a522-4da17c7ff6cf', 'client_order_id': '88e99e6f-c3bd-423e-b474-7a54bacb72ea', 'created_at': '2024-08-16T00:43:00.151652947Z', 'updated_at': '2024-08-16T00:43:00.153109657Z', 'submitted_at': '2024-08-16T00:43:00.151652947Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '3d905e83-da57-4eed-8385-c36641ef345e', 'client_order_id': 'a618f696-a479-4c2b-8d19-82a33a5a1b1a', 'created_at': '2024-08-16T00:47:00.086050522Z', 'updated_at': '2024-08-16T00:47:00.088046982Z', 'submitted_at': '2024-08-16T00:47:00.086050522Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:Close position ETHUSD
 [{'symbol': 'ETHUSD', 'status': 200, 'body': {'id': '8b342e50-3888-4f1a-a8fd-7ba95bcdfca5', 'client_order_id': '6a3ad321-a194-4a9a-94c6-575fcd1f0f97', 'created_at': '2024-08-16T00:50:00.128477487Z', 'updated_at': '2024-08-16T00:50:00.130386776Z', 'submitted_at': '2024-08-16T00:50:00.128477487Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.0798', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'sell', 'position_intent': 'sell_to_close', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}}, {'symbol': 'SPY', 'status': 403, 'body': {'available': '0', 'code': 40310000, 'existing_qty': '30', 'held_for_orders': '30', 'message': 'insufficient qty available for order (requested: 30, available: 0)', 'symbol': 'SPY'}}]
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': 'b708cb64-ed1d-49bf-a8d6-70f691bc8971', 'client_order_id': 'ce06b987-e32c-480b-a224-40a9d3f7acd2', 'created_at': '2024-08-16T00:50:00.164095593Z', 'updated_at': '2024-08-16T00:50:00.164995643Z', 'submitted_at': '2024-08-16T00:50:00.164095593Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': '9a37bc9c-b594-4084-91e1-40f89b8de733', 'client_order_id': '9cb780b8-41f4-4145-8669-6e369ddefc6a', 'created_at': '2024-08-16T00:53:00.130421658Z', 'updated_at': '2024-08-16T00:53:00.131905448Z', 'submitted_at': '2024-08-16T00:53:00.130421658Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': 'd887b9aa-6f25-4dbc-88f5-5dcf0919922b', 'client_order_id': '44370ea7-149e-4fff-9210-e7dd06fe7dab', 'created_at': '2024-08-16T00:55:00.133934371Z', 'updated_at': '2024-08-16T00:55:00.135256601Z', 'submitted_at': '2024-08-16T00:55:00.133934371Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': '7f8f265a-9fbf-468a-a467-ecd554687795', 'client_order_id': 'f0182dc2-8cad-4928-a415-2c799cf6bc6f', 'created_at': '2024-08-16T00:57:00.182850437Z', 'updated_at': '2024-08-16T00:57:00.184129576Z', 'submitted_at': '2024-08-16T00:57:00.182850437Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': 'a9815855-7b84-478b-9abc-572d6d153218', 'client_order_id': '3ab967bd-f5b9-4ba5-b039-56f604aeaf6b', 'created_at': '2024-08-16T00:59:00.177389056Z', 'updated_at': '2024-08-16T00:59:00.178771605Z', 'submitted_at': '2024-08-16T00:59:00.177389056Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': 'b4198382-9ac8-4d38-9d61-3f326a7f7b7d', 'client_order_id': 'e9915d26-5f00-4856-814f-9198c8efb041', 'created_at': '2024-08-16T01:00:00.144155038Z', 'updated_at': '2024-08-16T01:00:00.147416248Z', 'submitted_at': '2024-08-16T01:00:00.144155038Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': 'a5b2b86c-3bdb-45bb-be6c-81d0d0c778f9', 'client_order_id': '95cd1a44-47f6-4e6c-b240-14877d1a8247', 'created_at': '2024-08-16T01:04:00.213584225Z', 'updated_at': '2024-08-16T01:04:00.215402935Z', 'submitted_at': '2024-08-16T01:04:00.213584225Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': '22ff2298-3fd0-4134-b8d0-03dd4893ed63', 'client_order_id': '4c93b53d-77cc-47e4-83f7-b26c8a2b36f0', 'created_at': '2024-08-16T01:05:00.162629802Z', 'updated_at': '2024-08-16T01:05:00.164221672Z', 'submitted_at': '2024-08-16T01:05:00.162629802Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': 'b6ee7bcd-229e-4fe5-915b-9a8b0933ed77', 'client_order_id': '7990648b-36ae-4cf4-94b9-8de790852e05', 'created_at': '2024-08-16T01:06:00.077881542Z', 'updated_at': '2024-08-16T01:06:00.079269612Z', 'submitted_at': '2024-08-16T01:06:00.077881542Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': '85a9ef6a-3a74-48e2-a8f2-325f15a3f155', 'client_order_id': '26496c06-0a8c-4f95-b5e9-ebc6bcb5cdc5', 'created_at': '2024-08-16T01:07:00.074110516Z', 'updated_at': '2024-08-16T01:07:00.075424466Z', 'submitted_at': '2024-08-16T01:07:00.074110516Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.BUY 0.01 share(s) of BTCUSD
 {'id': '4b13e903-023f-45b6-9090-b9ad7baa0167', 'client_order_id': '2e9c70da-7b03-44e9-b1d1-c4f90c7ff0b7', 'created_at': '2024-08-16T01:09:00.212230726Z', 'updated_at': '2024-08-16T01:09:00.213690846Z', 'submitted_at': '2024-08-16T01:09:00.212230726Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:Close position BTCUSD
 [{'symbol': 'BTCUSD', 'status': 200, 'body': {'id': 'b1b2fa25-aec3-4b6c-adb3-f93293ce01d6', 'client_order_id': '36ca9298-e019-4248-b828-cb245f9d6b28', 'created_at': '2024-08-16T01:10:00.08128846Z', 'updated_at': '2024-08-16T01:10:00.08261812Z', 'submitted_at': '2024-08-16T01:10:00.08128846Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': '276e2673-764b-4ab6-a611-caf665ca6340', 'symbol': 'BTC/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.109725', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'sell', 'position_intent': 'sell_to_close', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}}, {'symbol': 'SPY', 'status': 403, 'body': {'available': '0', 'code': 40310000, 'existing_qty': '30', 'held_for_orders': '30', 'message': 'insufficient qty available for order (requested: 30, available: 0)', 'symbol': 'SPY'}}]
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'a22929da-e182-4370-a051-cafb5657e8d2', 'client_order_id': '501b91f2-23cd-4886-91f9-5fde69bdc7df', 'created_at': '2024-08-16T01:10:00.119014927Z', 'updated_at': '2024-08-16T01:10:00.120276747Z', 'submitted_at': '2024-08-16T01:10:00.119014927Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '8e5a63ba-645f-4458-a262-5276721d4cc2', 'client_order_id': 'a7acb208-d2bd-47bb-ab64-bf5bf1c36c27', 'created_at': '2024-08-16T01:13:00.212186456Z', 'updated_at': '2024-08-16T01:13:00.213576656Z', 'submitted_at': '2024-08-16T01:13:00.212186456Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '695cd829-c02c-4e0c-b468-cf9cad479644', 'client_order_id': '074b7788-a20f-4206-b176-f7335c32dd16', 'created_at': '2024-08-16T01:17:00.205309795Z', 'updated_at': '2024-08-16T01:17:00.206725255Z', 'submitted_at': '2024-08-16T01:17:00.205309795Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '1fb3dd04-1010-42fa-b22e-fb7cebcf42af', 'client_order_id': '2f189d1b-83f8-4b61-9510-3a30ed96d207', 'created_at': '2024-08-16T01:18:00.264368138Z', 'updated_at': '2024-08-16T01:18:00.265676028Z', 'submitted_at': '2024-08-16T01:18:00.264368138Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '6d007f99-5d93-41a5-9ca1-b955a2daae52', 'client_order_id': '7ec4f4ce-7b71-477c-8715-f6f485ed9f9a', 'created_at': '2024-08-16T01:19:00.084195111Z', 'updated_at': '2024-08-16T01:19:00.08518055Z', 'submitted_at': '2024-08-16T01:19:00.084195111Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'a857cb51-c498-4c27-ac91-5a02b7247b24', 'client_order_id': '0a15e772-3513-455c-b983-fe4d80e15e54', 'created_at': '2024-08-16T01:21:00.16485067Z', 'updated_at': '2024-08-16T01:21:00.16619642Z', 'submitted_at': '2024-08-16T01:21:00.16485067Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '60e34c3f-6f92-4c83-86e7-513e00eea89c', 'client_order_id': 'ac49d5d1-36c0-4789-9be2-6f61b0000cbc', 'created_at': '2024-08-16T01:22:00.074024961Z', 'updated_at': '2024-08-16T01:22:00.075603451Z', 'submitted_at': '2024-08-16T01:22:00.074024961Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '32c78239-4352-426c-80c7-09d8bf799e06', 'client_order_id': '2a3ae218-ada4-4fe2-bcb8-bf691d492b03', 'created_at': '2024-08-16T01:23:00.043539524Z', 'updated_at': '2024-08-16T01:23:00.046865904Z', 'submitted_at': '2024-08-16T01:23:00.043539524Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'f82a1850-0002-4325-8e11-ebb6f4b17249', 'client_order_id': 'd853a8a5-632c-447d-ad42-5b7e84a99ee3', 'created_at': '2024-08-16T01:25:00.162952388Z', 'updated_at': '2024-08-16T01:25:00.164309398Z', 'submitted_at': '2024-08-16T01:25:00.162952388Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': 'bb05387e-e1ed-4c3b-99fb-998e4c47c374', 'client_order_id': 'e35607b9-da1c-4f30-a4fb-46a7845fa13b', 'created_at': '2024-08-16T01:27:00.146402385Z', 'updated_at': '2024-08-16T01:27:00.147778385Z', 'submitted_at': '2024-08-16T01:27:00.146402385Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
INFO:trader:OrderSide.SELL 0.01 share(s) of ETHUSD
 {'id': '44dfbf4f-43a2-460b-9317-10f02baed16e', 'client_order_id': '059c5e3c-0fe0-4091-a352-22ab6fb64e8e', 'created_at': '2024-08-16T01:30:00.234058619Z', 'updated_at': '2024-08-16T01:30:00.235384369Z', 'submitted_at': '2024-08-16T01:30:00.234058619Z', 'filled_at': None, 'expired_at': None, 'canceled_at': None, 'failed_at': None, 'replaced_at': None, 'replaced_by': None, 'replaces': None, 'asset_id': 'a1733398-6acc-4e92-af24-0d0667f78713', 'symbol': 'ETH/USD', 'asset_class': 'crypto', 'notional': None, 'qty': '0.01', 'filled_qty': '0', 'filled_avg_price': None, 'order_class': '', 'order_type': 'market', 'type': 'market', 'side': 'buy', 'position_intent': 'buy_to_open', 'time_in_force': 'gtc', 'limit_price': None, 'stop_price': None, 'status': 'pending_new', 'extended_hours': False, 'legs': None, 'trail_percent': None, 'trail_price': None, 'hwm': None, 'subtag': None, 'source': None}
ERROR:asyncio:Task was destroyed but it is pending!